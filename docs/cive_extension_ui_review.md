# Revisión de usabilidad de la extensión CIVE

## Arquitectura visual actual
- El botón flotante que abre la interfaz se arma dinámicamente desde `js/ui.js` y utiliza el estilo `css/floating_button.css` para presentarse como una píldora azul con el ícono de la extensión (`icon.png`).【F:cive_extention/js/ui.js†L1-L45】【F:cive_extention/css/floating_button.css†L1-L40】
- El panel lateral se renderiza sobre la marcha y alterna secciones (Inicio, Protocolos, Procedimientos, Recetas y Consulta) con un contenedor deslizante de 300px que ocupa el 50% de la altura de la ventana.【F:cive_extention/js/ui.js†L25-L125】【F:cive_extention/css/floating_popup.css†L1-L44】
- Cada vista interna se nutre de botones Bootstrap (`btn-sm`) generados dinámicamente y, en el caso del popup de exámenes, se apoyan en plantillas HTML independientes (`js/popup/*`).【F:cive_extention/js/popup_interaction.js†L104-L186】【F:cive_extention/js/popup/popup.html†L10-L56】

## Hallazgos clave
1. **Legibilidad limitada**: los formularios y botones del popup autónomo (`js/popup/popup.html`) usan tipografías de 4–10px, lo que dificulta su lectura en pantallas estándar y complica la interacción táctil.【F:cive_extention/js/popup/popup.css†L42-L63】
2. **Jerarquía visual inconsistente**: el panel lateral mezcla iconografía, botones y tarjetas sin un layout uniforme (ej. `grid-item` incrustado junto a tarjetas Bootstrap), lo que genera saltos de alineación y hace difícil detectar acciones primarias.【F:cive_extention/js/ui.js†L37-L125】
3. **Navegación oculta**: al alternar secciones se oculta el menú de inicio y no existe una navegación persistente o breadcrumbs que recuerden al usuario dónde está; si se regresa con "Atrás" se pierde el contexto y no hay indicador de sección activa más allá del contenido visible.【F:cive_extention/js/ui.js†L49-L125】【F:cive_extention/js/popup_interaction.js†L82-L89】
4. **Falta de estados de carga y vacíos**: cuando se consulta la API para protocolos o recetas, la interfaz no muestra spinners, mensajes de "sin resultados" ni avisos de error; el contenedor queda en blanco hasta que se llena con datos o falla silenciosamente en consola.【F:cive_extention/js/popup_interaction.js†L236-L305】
5. **Accesibilidad y foco**: el botón flotante carece de texto visible, `aria-label` o estados de foco diferenciados, y el panel lateral no implementa gestión de foco al abrirse; esto limita el uso con teclado o lectores de pantalla.【F:cive_extention/js/ui.js†L1-L45】【F:cive_extention/css/floating_button.css†L1-L33】
6. **Dependencia de scroll vertical**: el contenedor lateral fija su altura al 50% de la ventana; cuando hay muchas categorías o protocolos, obliga a un scroll intenso en un espacio reducido, en lugar de paginar o permitir expansión a pantalla completa.【F:cive_extention/css/floating_popup.css†L5-L44】

## Recomendaciones de mejora
1. **Escalar tipografías y targets táctiles**: aumentar las fuentes base a 14–16px y los `padding` de botones a ≥12px para cumplir con WCAG y mejorar la precisión en tablets; aprovechar variables CSS para mantener consistencia.【F:cive_extention/js/popup/popup.css†L42-L63】
2. **Unificar layout con componentes reutilizables**: encapsular la cuadrícula de accesos en un componente (por ejemplo, tarjetas con icono y título) y sostener el mismo patrón en cada sección para reforzar la memoria muscular del usuario.【F:cive_extention/js/ui.js†L37-L125】
3. **Barra lateral con navegación fija**: introducir una barra superior persistente con pestañas o un menú lateral que permita saltar entre Protocolos, Recetas, Consulta, etc. sin volver a "Inicio", y resaltar visualmente la sección activa.【F:cive_extention/js/ui.js†L49-L125】
4. **Estados de carga y mensajes contextuales**: mostrar indicadores mientras se esperan las respuestas de `obtenerProcedimientosDesdeApi`, `cargarRecetas` o `cargarExamenes`, e incluir mensajes de "No se encontraron resultados" o enlaces para reintentar ante un fallo.【F:cive_extention/js/popup_interaction.js†L104-L305】
5. **Mejorar accesibilidad**: añadir `aria-label` al botón flotante, gestionar el foco hacia el encabezado del panel cuando se abre, habilitar cierre con `Esc` y proporcionar estados `:focus` visibles en los estilos, además de permitir control mediante teclado.【F:cive_extention/js/ui.js†L1-L45】【F:cive_extention/css/floating_button.css†L1-L33】
6. **Ajustar el contenedor dinámicamente**: permitir que el panel pueda expandirse a pantalla completa en pantallas pequeñas, o usar un layout responsive que reacomode el contenido en una ventana modal centrada para usuarios que prefieren trabajar con más espacio.【F:cive_extention/css/floating_popup.css†L5-L44】
7. **Agregar búsqueda y filtros rápidos**: habilitar un buscador incremental sobre la lista de protocolos/procedimientos para reducir la carga cognitiva de recorrer docenas de botones; los datos ya se cargan en memoria, por lo que el filtro puede ser del lado del cliente.【F:cive_extention/js/popup_interaction.js†L248-L287】
8. **Consistencia entre popups especializados**: alinear estilos entre `js/popup/popup.html` y el panel principal (mismo esquema de colores y tipografías), o integrarlos como "submodales" dentro del mismo flujo para evitar que el usuario salte entre patrones de UI distintos.【F:cive_extention/js/popup/popup.html†L10-L56】【F:cive_extention/js/ui.js†L25-L125】

Estas acciones priorizan la legibilidad, reducen la carga cognitiva y aportan accesibilidad sin alterar el flujo funcional existente.
